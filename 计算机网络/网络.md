# 网络

**重点知识：**

* 网络分层：OSI七层模型(了解)，TCP/IP四层或五层模型，每一层的代表协议，代表硬件和技术
* 网络传输流程：网络互联(了解)，局域网(了解)，广域网
* 重点协议：
  1. TCP/UDP:掌握特性，原理和流程
  2. HTTP:掌握协议的格式，及作用
  3. 其他重要协议：ARP/RARP , DNS , NAT , NATP , MTU , IMCP ，IP，MAC
  4. 网络传输流程中使用到的技术：以太网，路由，网关+子网掩码

## 基础内容

1. OSI七层模型：物理层，数据链路层，网络层，传输层，会话层，表示层，应用层

2. TCP/IP五层模型：物理层，数据链路层，网络层，传输层，应用层

3. 网络设备：

   1. 集线器：数据转发
   2. 交换机：数据转发，数据链路层
   3. 路由器：网络层
   4. 主机：应用层

   * 了解：交换机和路由器指传统设备，现在网络设备发展比较快，有3,4层交换机，4层路由器

## TCP/IP五层模型（四层模型没有物理层），从下到上

|            | 代表硬件                   | 协议、技术                          | 特性             |
| ---------- | -------------------------- | ----------------------------------- | ---------------- |
| 物理层     | 双绞线，WiFi电磁波，集线器 |                                     | 发送0,1光电信号  |
| 数据链路层 | 交换机                     | 以太网，令牌环网，无线LAN，ARP，MTU |                  |
| 网络层     | 路由器                     | IP                                  |                  |
| 传输层     |                            | TCP/UDP                             | 主机系统内核实现 |
| 应用层     |                            | HTTP,DNS,NAT,NATP,FTP,SMTP          | 应用程序实现     |

* 对于一台主机，它的操作系统内核实现了从传输层到物理层的内容
* 对于一台路由器，它实现了从网络层到物理层
* 对于一台交换机，它实现了数据链路层到物理层
* 对于集线器，只实现了物理层

## 封装和分用

* 封装类似发送快速包裹，需要从内往外打包；分用类似拆快递，需要从外往内拆包。
* 使用程序的时候，就知道目的IP+目的端口号

![image-20200412143327691](E:\GitHub\picBed\img\image-20200412143327691.png)

## 五元组

* 五元组：**"源IP"**+**"源端口号**+**"目的IP"**+**"目的端口号"**+**"协议号"**
* IP：定位网络中某一台主机，在**网络层包装I**P地址。本机IP默认127.0.0.1。长度32位
* 端口号：绑定主机中某一个应用程序，应用程序都是通过**在传输层包装**端口号**发生/接收数据**
* IP+端口号：可以定位到网络上具体的某一应用程序
* 发送数据：五元组
* 接收端响应数据：目的IP+目的端口号 = 发送数据包中的源IP+源端口
* MAC地址：
  * MAC地址用来识别数据链路层中相连的节点;
  * 网卡绑定的物理地址
  * 长度为48位, 及6个字节. 一般用16进制数字加上冒号的形式来表示(例如: 08:00:27:03:fb:19)
  * 在网卡出厂时就确定了, 不能修改. mac地址通常是唯一的(虚拟机中的mac地址不是真实的mac地址, 可能会冲突; 也有些网卡支持用户配置mac地址).
* IP和MAC的区别：
  * IP地址描述的是路途总体的起点和终点
  * MAC地址描述的是路途上的每一个区间的起点和终点

## 网络互联（集线器）

* 集线器的作用：只做数据的转发
* ARP协议：建立IP与MAC的映射主机ARP缓存表
* ![image-20200412160531944](E:\GitHub\picBed\img\image-20200412160531944.png)
* 场景：主机A发送FTP”下载某个文件”数据包------>主机C
* 查找目的主机MAC地址：
  1. 查找本地ARP缓存表，通过目的IP查找目的MAC
  2. 如果找到，就直接发送数据包**（广播）**
  3. 如果找不到，主机A广播一个ARP请求数据包---->所有主机接收到ARP数据包
     * 主机C发现请求自己的MAC，就返回数据包（ARP响应）
     * 其他主机：通过IP判断出不是请求自己的MAC，直接丢弃数据包
* 冲突域：
  * 概念：连接同一导线上的所有工作站的集合，或者说是同一物理网段上所有节点的集合或以太网上竞争同一宽带的节点集合。（房间中所有人同时说话，会让大家互相都听不清）
  * 集线器网络互联存在冲突域，交换机可以解决冲突域。

