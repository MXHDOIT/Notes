# 操作系统必知必会

* 简述计算机系统
* 计算机硬件
* 操作系统核心概念
* 进程与线程
* 内存管理
* I/O管理和文件系统

## 简述计算机系统

* 注意我这里说的是计算机系统可不是操作系统

* 现代计算机系统由一个或多个**处理器（CPU）**、**主存**、**打印机**、**输入设备**（**键盘**+**鼠标**）、**输出设备显示器**、**网络接口以及各种输入/输出设备**构成。

  ![image-20200512151320529](C:\Users\apple\AppData\Roaming\Typora\typora-user-images\image-20200512151320529.png)

  我们普通的程序员不会直接去操作硬件，所以我们在硬件基础上，安装了一层系统软件，这层软件能够通过响应用户输入的指令达到控制硬件的效果，从而满足用户需求，这种软件称之为**操作系统**

* 一般带有图形界面的操作系统被称为图形用户界面(Graphical User Interface,GUI),而基于文本、命令行的通常称为Shell。

* 计算机系统简化图

  ![image-20200512152022894](C:\Users\apple\AppData\Roaming\Typora\typora-user-images\image-20200512152022894.png)

  * 在计算机体系中，最下层是硬件，硬件包括芯片、电路板、磁盘、显示器等设备，在硬件上层便就是软件。大部分计算机有两种运行模式：**内核态**和**用户态**，软件中最基础的部分是**操作系统**，它**运行在内核态**中，内核态也称为**管态**和**核心态**，它们都是操作系统的运行状态，只不过是不同的叫法而已。操作系统可以直接和硬件交互，可以执行机器能够运行的任何指令。软件的其余部分运行在**用户态**下。
  * **用户接口程序(Shell或者GUI)**处于用户态中，并且它们位于用户态的最低层，允许用户运行其他程序，例如 Web 浏览器、电子邮件阅读器、音乐播放器等。越靠近用户态的应用程序越容易编写，如果你不喜欢某个电子邮件阅读器你可以重新写一个或者换一个，但你很难去自行写一个操作系统或者是中断处理程序。这个程序由硬件保护，防止外部对其进行修改。

## 计算机硬件

计算机硬件系统图示：

![image-20200512153749396](C:\Users\apple\AppData\Roaming\Typora\typora-user-images\image-20200512153749396.png)

#### 1.中央处理器(CPU)

* 定义：中央处理器（CPU，Central Processing Unit）是一块超大规模的集成电路，是一台计算机的运算核心（Core）和控制核心（ Control Unit）。人们判定计算机的**计算速度**的最重要的指标便是中央处理器(CPU)的**运算速度**，**中央处理器(CPU)**就像是计算机的**心脏**，牵动着计算机的每一个部分。
* 功能：**解释计算机指令**以及**处理计算机软件中的数据**。
* 相关知识：
  * **主频**：频是CPU的时钟频率(CPU Clock Speed)，是CPU运 算时的工作的频率（1秒内发生的同步脉冲数）的简称。单位是**Hz**。一般说来，主频越高，CPU的速度越快，由于内部结构不同，并非所有的时钟频率相同的CPU的性能都一样。
  * **外频**：系统总线的工作频率， CPU与外部（主板芯片组）交换数据、指令的工作时钟频率。
  * **倍频**：倍频则是指CPU外频与主频相差的倍数。
    * **三者关系**：**主频=外频x倍频**
  * **缓存**：高速交换的存储器。CPU缓存分为一级 ，二级，三级缓存，即L1，L2，L3。用来**协调CPU与主存之间存取速度**的差异而设置的。一般CPU工作速度高，但内存的工作速度相对较低，为了解决这个问题，通常使用高速缓存，高速缓存的存取速度介于CPU与主存之间。系统将一些CPU在最近几个时间段经常访问的内容存在高速缓存，这样就在一定程度上缓解了由于主存速度低造成的CPU“停工待料”的情况。
  * **内存总线速度**：一般等同于CPU的外频 ，指CPU与二级(L2)高速缓存和内存之间的通信速度。
  * **地址总线宽度**：决定了CPU可以访问的物理地址空间。

#### **2.存储器(Memory)**

* 计算机中第二个主要的组件就是内存。理想情况下，内存应该非常快速(比执行一条指令要快，从而不会拖慢 CPU 执行效率)，而且足够大且便宜，但是目前的技术手段无法满足三者的需求。于是采用了不同的处理方式，存储器系统采用一种分层次的结构

  ![image-20200512212953944](C:\Users\apple\AppData\Roaming\Typora\typora-user-images\image-20200512212953944.png)

  * 顶层的存储器速度最高，但是容量最小，成本非常高，层级结构越向下，其访问效率越慢，容量越大，但是造价也就越便宜。

* **寄存器**

  * 存储器的顶层是 CPU 中的`寄存器`，它们用和 CPU 一样的材料制成，所以和 CPU 一样快。程序必须在软件中自行管理这些寄存器（即决定如何使用它们）
  * 常见寄存器：
    1. `程序计数器(program counter)`，程序计数器会指示下一条需要从内存提取指令的地址。提取指令后，程序计数器将更新为下一条需要提取的地
    2. `堆栈指针(stack pointer)`，它指向内存中当前栈的顶端。堆栈指针会包含输入过程中的有关参数、局部变量以及没有保存在寄存器中的临时变量。
    3. `PSW(Program Status Word)` 程序状态字寄存器，这个寄存器是由操作系统维护的8个字节(64位) long 类型的数据集合。它会跟踪当前系统的状态。除非发生系统结束，否则我们可以忽略 PSW 。用户程序通常可以读取整个PSW，但通常只能写入其某些字段。PSW 在系统调用和 I / O 中起着重要作用。

* **高速缓存**

  * 位于寄存器下面的是高速缓存，它多数由硬件控制。主存被分割成高速缓存行(cache lines) 为 64 字节，内存地址的 0 - 63 对应高速缓存行 0 ，地址 64 - 127 对应高速缓存行的 1，等等。使用最频繁的高速缓存行保存在位于 CPU 内部或非常靠近 CPU 的高速缓存中。当应用程序需要从内存中读取关键词的时候，高速缓存的硬件会检查所需要的高速缓存行是否在高速缓存中。如果在的话，那么这就是高速缓存命中(cache hit)。高速缓存满足了该请求，并且没有通过总线将内存请求发送到主内存。高速缓存命中通常需要花费两个时钟周期。缓存未命中需要从内存中提取，这会消耗大量的时间。高速缓存行会限制容量的大小因为它的造价非常昂贵。有一些机器会有两个或者三个高速缓存级别，每一级高速缓存比前一级慢且容量更大。

* **主存**

  * **定义**：主存通常叫做 `RAM(Random Access Memory)`,内存储器是计算机中重要的部件之一，它是与CPU进行沟通的**桥梁**。计算机中所有程序的运行都是在内存储器中进行的，因此内存储器的性能对计算机的影响非常大。
  * **功能**：**内存储器(Memory)**也被称为**内存**，其作用是用于暂时存放CPU中的运算数据，以及与硬盘等外部存储器交换的数据。

* **磁盘**

  * **定义**：外储存器是指除计算机内存及CPU缓存以外的储存器，此类储存器一般**断电后仍然能保存数据**（与内存断电数据就丢失不同）。

  * 磁盘同 RAM 相比，每个二进制位的成本低了两个数量级，而且经常也有两个数量级大的容量。磁盘唯一的问题是随机访问数据时间大约慢了三个数量级。磁盘访问慢的原因是因为磁盘的构造不同

    ![image-20200512215327807](C:\Users\apple\AppData\Roaming\Typora\typora-user-images\image-20200512215327807.png)

  * 磁盘是一种机械装置，在一个磁盘中有一个或多个金属盘片，它们以 5400rpm、7200rpm、10800rpm 或更高的速度旋转。从边缘开始有一个机械臂悬横在盘面上，这类似于老式播放塑料唱片 33 转唱机上的拾音臂。信息会写在磁盘一系列的同心圆上。在任意一个给定臂的位置，每个磁头可以读取一段环形区域，称为磁道(track)。把一个给定臂的位置上的所有磁道合并起来，组成了一个柱面(cylinder)。

    ![image-20200512215351025](C:\Users\apple\AppData\Roaming\Typora\typora-user-images\image-20200512215351025.png)

  * 每个磁道划分若干扇区，扇区的值是 512 字节。在现代磁盘中，较外部的柱面比较内部的柱面有更多的扇区。机械臂从一个柱面移动到相邻的柱面大约需要 1ms。而随机移到一个柱面的典型时间为 5ms 至 10ms，具体情况以驱动器为准。一旦磁臂到达正确的磁道上，驱动器必须等待所需的扇区旋转到磁头之下，就开始读写，低端硬盘的速率是**50MB/s**，而高速磁盘的速率是 **160MB/s。**

    > 需要注意，固态硬盘(Solid State Disk, SSD)不是磁盘，固态硬盘并没有可以移动的部分，外形也不像唱片，并且数据是存储在存储器（闪存）中，与磁盘唯一的相似之处就是它也存储了大量即使在电源关闭也不会丢失的数据。

  * 许多计算机支持一种著名的**虚拟内存**机制，这种机制使得期望运行的存储空间大于实际的物理存储空间。其方法是将程序放在磁盘上，而将主存作为一部分缓存，用来保存最频繁使用的部分程序，这种机制需要快速映像内存地址，用来把程序生成的地址转换为有关字节在 RAM 中的物理地址。这种映像由 CPU 中的一个称为 **存储器管理单元(Memory Management Unit, MMU)** 的部件来完成。

    ![image-20200512215513499](C:\Users\apple\AppData\Roaming\Typora\typora-user-images\image-20200512215513499.png)

  * 缓存和 MMU 的出现是对系统的性能有很重要的影响，在多道程序系统中，从一个程序切换到另一个程序的机制称为 **上下文切换(context switch)**，对来自缓存中的资源进行修改并把其写回磁盘是很有必要的。

#### 3.I/O设备

* **输入设备**

  * 输入设备的任务是把人们编好的程序和原始数据送到计算机中去，并且将他们转换成计算机内存所能识别和接受的信息方式
  * 输入信息的形态可分为字符（包括汉字）输入、图形输入、图像输入及语言输入等。
  * 目前，常见的输入设备有**：键盘、鼠标、扫描仪**等。**辅助存储器（磁盘、磁带）也可以看作输入设备**。另外，自动控制和检测系统中使用的模数（A/D）转换装置也是一种输入设备。

* **输出设备**

  * 输出设备的任务是将计算机的处理结果以人或其他设备所能接受的形式送出计算机
  * 目前最常用的输出设备是打印机和显示器。辅助存储器也可以看做输出设备。另外，数模（D/A）转换装置也是一种输出设备

* cpu和存储器并不是操作系统唯一需要管理的资源，I/O设备也是非常重要的一环。

  ![image-20200512220521705](C:\Users\apple\AppData\Roaming\Typora\typora-user-images\image-20200512220521705.png)

*  **I/O设备一般包括两个部分：设备控制器和设备本身**。

  * **控制器：**是查找主板上的一块芯片或一组芯片（硬盘，网卡，声卡等都需要插到一个口上，这个口连的便是控制器），控制器负责控制连接的设备，它从操作系统接收命令，比如读硬盘数据，然后就对硬盘设备发起读请求来读出内容。
  * **控制器的功能**：通常情况下对设备的控制是非常复杂和具体的，控制器的任务就是为操作系统屏蔽这些复杂而具体的工作，提供给操作系统一个简单而清晰的接口。
  * **设备本身**：有相对简单的接口且标准的，这样大家都可以为其编写驱动程序了。要想调用设备，必须根据该接口编写复杂而具体的程序，于是有了控制器提供设备驱动接口给操作系统。必须把设备驱动程序安装到操作系统中

## 操作系统核心概念

1. **操作系统(Operating System,OS)**：是管理计算机硬件与软件资源的系统软件，同时也是计算机系统的**内核与基石**。操作系统需要处理**管理与配置内存**、**决定系统资源供需的优先次序**、**控制输入与输出设备**、**操作网络与管理文件系统等基本事务**。操作系统也提供一个用户与系统交互的操作界面。

2. `shell`：它是一个程序，可从键盘获取命令并将其提供给操作系统以执行。 在过去，它是类似 Unix 的系统上唯一可用的用户界面。 如今，除了命令行界面（CLI）外，我们还具有图形用户界面（GUI）

3. `内核模式(kernel mode)`: 通常也被称为 `超级模式（supervisor mode）`，在内核模式下，正在执行的代码具有对底层硬件的完整且不受限制的访问。 它可以执行任何 CPU 指令并引用任何内存地址。 内核模式通常保留给操作系统的最低级别，最受信任的功能。 内核模式下的崩溃是灾难性的； 他们将停止整个计算机。 超级用户模式是计算机开机时选择的自动模式

4. `用户模式(user node)`：当操作系统运行用户应用程序（例如处理文本编辑器）时，系统处于用户模式。 当应用程序请求操作系统的帮助或发生中断或系统调用时，就会发生从用户模式到内核模式的转换。在用户模式下，模式位设置为1。 从用户模式切换到内核模式时，它从1更改为0。

5. `复用(multiplexing)`：也称为共享，在操作系统中主要指示了时间和空间的管理。对资源进行复用时，不同的程序或用户轮流使用它。 他们中的第一个开始使用资源，然后再使用另一个，依此类推。

6. `计算机架构(computer architecture)` ： 在计算机工程中，计算机体系结构是描述计算机系统功能，组织和实现的一组规则和方法。它主要包括指令集、内存管理、I/O 和总线结构

   ![image-20200512225031340](C:\Users\apple\AppData\Roaming\Typora\typora-user-images\image-20200512225031340.png)

7. `大型机(mainframes)`：大型机是一类计算机，通常以其大尺寸，存储量，处理能力和高度的可靠性而著称。它们主要由大型组织用于需要大量数据处理的关键任务应用程序。

8. `批处理(batch system)`: 批处理操作系统的用户不直接与计算机进行交互。 每个用户都在打孔卡等脱机设备上准备工作，并将其提交给计算机操作员。 为了加快处理速度，将具有类似需求的作业一起批处理并成组运行。 程序员将程序留给操作员，然后操作员将具有类似要求的程序分批处理。

9. `多处理系统(Computer multitasking)`：是指计算机同时运行多个程序的能力。多任务的一般方法是运行第一个程序的一段代码，保存工作环境；再运行第二个程序的一段代码，保存环境；……恢复第一个程序的工作环境，执行第一个程序的下一段代码。

10. `分时系统(Time-sharing)`：在计算中，分时是通过多程序和多任务同时在许多用户之间共享计算资源的一种系统

11. `相容分时系统(Compatible Time-Sharing System)`：最早的分时操作系统，由美国麻省理工学院计算机中心设计与实作。

12. `云计算(cloud computing)`：云计算是计算机系统资源（尤其是数据存储和计算能力）的按需可用性，而无需用户直接进行主动管理。这个术语通常用于描述 Internet 上可供许多用户使用的数据中心。 如今占主导地位的大型云通常具有从中央服务器分布在多个位置的功能。 如果与用户的连接相对较近，则可以将其指定为边缘服务器。

13. `UNIX 操作系统`：UNIX 操作系统，是一个强大的多用户、多任务操作系统，支持多种处理器架构，按照操作系统的分类，属于分时操作系统。

14. `UNIX System V`：是 UNIX 操作系统的一个分支。

15. `BSD(Berkeley Software Distribution)`：UNIX 的衍生系统。

16. `POSIX`：可移植操作系统接口，是 IEEE 为要在各种 UNIX 操作系统上运行软件，而定义API的一系列互相关联的标准的总称。

17. `MINIX`：Minix，是一个迷你版本的类 UNIX 操作系统。

18. `Linux`：终于到了大名鼎鼎的 Linux 操作系统了，太强大了，不予以解释了，大家都懂。

19. `DOS (Disk Operating System)`：磁盘操作系统（缩写为DOS）是可以使用磁盘存储设备（例如软盘，硬盘驱动器或光盘）的计算机操作系统。

20. `MS-DOS(MicroSoft Disk Operating System)` ：一个由美国微软公司发展的操作系统，运行在Intel x86个人电脑上。它是DOS操作系统家族中最著名的一个，在Windows 95以前，DOS是IBM PC及兼容机中的最基本配备，而MS-DOS则是个人电脑中最普遍使用的DOS操作系统

21. `MacOS X`，怎能少的了苹果操作系统？macOS 是苹果公司推出的基于图形用户界面操作系统，为 Macintosh 的主操作系统

22. `Windows NT(Windows New Technology)`：是美国微软公司 1993 年推出的纯 32 位操作系统核心。

23. `网络操作系统(network operating systems)`：网络操作系统是用于网络设备（如路由器，交换机或防火墙）的专用操作系统。

24. `分布式网络系统(distributed operating systems)`：分布式操作系统是在独立，网络，通信和物理上独立计算节点的集合上的软件。 它们处理由多个CPU服务的作业。每个单独的节点都拥有全局集合操作系统的特定软件的一部分。

25. `程序计数器(Program counter)`：程序计数器 是一个 CPU 中的`寄存器`，用于指示计算机在其程序序列中的`位置`。

26. `堆栈寄存器(stack pointer)`： 堆栈寄存器是计算机 CPU 中的寄存器，其目的是`跟踪调用堆栈`。

27. `程序状态字(Program Status Word)`: 它是由操作系统维护的8个字节（或64位）长的数据的集合。它跟踪系统的当前状态。

28. `流水线(Pipeline)`: 在计算世界中，管道是一组串联连接的数据处理元素，其中一个元素的输出是下一个元素的输入。 流水线的元素通常以并行或按时间分割的方式执行。 通常在元素之间插入一定数量的缓冲区存储。

    ![image-20200512225659322](C:\Users\apple\AppData\Roaming\Typora\typora-user-images\image-20200512225659322.png)

29. `超标量(superscalar)`： 超标量 CPU 架构是指在一颗处理器内核中实行了指令级并发的一类并发运算。这种技术能够在相同的CPU主频下实现更高的 CPU 流量。

30. `系统调用(system call)`: 指运行在用户空间的程序向操作系统内核请求需要更高权限运行的服务。系统调用提供用户程序与操作系统之间的接口。大多数系统交互式操作需求在内核态运行。如设备 IO 操作或者进程间通信。

31. `多线程(multithreading)`：是指从软件或者硬件上实现多个线程并发执行的技术。具有多线程能力的计算机因为有硬件支持而能够在同一时间执行多个线程，进而提升整体处理性能。

32. `CPU 核心(core)`：它是 CPU 的大脑，它接收指令，并执行计算或运算以满足这些指令。一个 CPU 可以有多个内核。

33. 存储体系结构：顶层的存储器速度最高，但是容量最小，成本非常高，层级结构越向下，其访问效率越慢，容量越大，但是造价也就越便宜。

    ![image-20200512225804064](C:\Users\apple\AppData\Roaming\Typora\typora-user-images\image-20200512225804064.png)

34. `高速缓存行(cache lines)`：其实就是把高速缓存分割成了固定大小的块，其大小是以突发读或者突发写周期的大小为基础的。

35. `缓存命中(cache hit)`：当应用程序或软件请求数据时，会首先发生缓存命中。 首先，中央处理单元（CPU）在其最近的内存位置（通常是主缓存）中查找数据。 如果在缓存中找到请求的数据，则将其视为缓存命中。

    ![image-20200512225844045](C:\Users\apple\AppData\Roaming\Typora\typora-user-images\image-20200512225844045.png)

36. `L1 cache`：一级缓存是 CPU 芯片中内置的存储库。 L1缓存也称为`主缓存`，是计算机中`最快`的内存，并且最接近处理器。

37. `L2 cache`: 二级缓存存储库，内置在 CPU 芯片中，包装在同一模块中，或者建在主板上。 L2 高速缓存提供给 L1 高速缓存，后者提供给处理器。 L2 内存比 L1 内存慢。

38. `L3 cache`: 三级缓存内置在主板上或CPU模块内的存储库。 L3 高速缓存为 L2 高速缓存提供数据，其内存通常比 L2 内存慢，但比主内存快。 L3 高速缓存提供给 L2 高速缓存，后者又提供给 L1 高速缓存，后者又提供给处理器。

39. `RAM((Random Access Memory)`：随机存取存储器，也叫主存，是与 CPU `直接交换数据`的内部存储器。它可以随时读写，而且速度很快，通常作为操作系统或其他正在运行中的程序的`临时`数据存储介质。RAM工作时可以随时从任何一个指定的地址写入（存入）或读出（取出）信息。它与 ROM 的最大区别是数据的`易失性`，即一旦断电所存储的数据将随之丢失。RAM 在计算机和数字系统中用来暂时存储程序、数据和中间结果。

40. `ROM (Read Only Memory)`：只读存储器是一种半导体存储器，其特性是**一旦存储数据就无法改变或删除**，且内容不会因为电源关闭而`消失`。在电子或电脑系统中，通常用以存储不需经常变更的程序或数据。

41. `EEPROM (Electrically Erasable PROM)`：电可擦除可编程只读存储器，是一种可以通过电子方式多次复写的半导体存储设备。

42. `闪存(flash memory)`： 是一种电子式可清除程序化只读存储器的形式，允许在操作中被多次擦或写的存储器。这种科技主要用于一般性数据存储，以及在电脑与其他数字产品间交换传输数据，如储存卡与U盘。

43. `SSD(Solid State Disks)`：固态硬盘，是一种主要以闪存作为永久性存储器的电脑存储设备。

44. `虚拟地址(virtual memory)`： 虚拟内存是计算机系统`内存管理`的一种机制。它使得应用程序认为它拥有连续可用的内存（一个连续完整的地址空间），而实际上，它通常是被分隔成多个物理内存碎片，还有部分暂时存储在外部磁盘存储器上，在需要时进行数据交换。与没有使用虚拟内存技术的系统相比，使用这种技术的系统使得大型程序的编写变得更容易，对真正的物理内存（例如RAM）的使用也更有效率。

45. `MMU (Memory Management Unit)`：内存管理单元，有时称作分页内存管理单元。它是一种负责处理中央处理器（CPU）的内存访问请求的计算机硬件。它的功能包括**虚拟地址到物理地址的转换（即虚拟内存管理）、内存保护、中央处理器高速缓存的控制等**。

46. `context switch`：上下文切换，又称环境切换。是一个存储和重建 CPU 状态的机制。要交换 CPU 上的进程时，必需先行存储当前进程的状态，然后再将进程状态读回 CPU 中。

47. `驱动程序(device driver)`：设备驱动程序，简称驱动程序（driver），是一个允许高级别电脑软件与硬件交互的程序，这种程序创建了一个硬件与硬件，或硬件与软件沟通的接口，经由主板上的总线或其它沟通子系统与硬件形成连接的机制，这样使得硬件设备上的数据交换成为可能。

48. `忙等(busy waiting)`：在软件工程中，忙碌等待`也称自旋`，是一种以进程反复检查一个条件是否为真的条件，这种机制可能为检查键盘输入或某个锁是否可用。

49. `中断(Interrupt)`：通常，在接收到来自外围硬件（相对于中央处理器和内存）的异步信号，或来自软件的同步信号之后，处理器将会进行相应的硬件／软件处理。发出这样的信号称为进行`中断请求（interrupt request，IRQ）`。硬件中断导致处理器通过一个`运行信息切换（context switch）`来保存执行状态（以程序计数器和程序状态字等寄存器信息为主）；`软件中断则`通常作为 CPU 指令集中的一个指令，以可编程的方式直接指示这种运行信息切换，并将处理导向一段中断处理代码。中断在计算机多任务处理，尤其是即时系统中尤为有用。

50. `中断向量(interrupt vector)`：中断向量位于中断向量表中。`中断向量表（IVT）`是将中断处理程序列表与中断向量表中的中断请求列表相关联的数据结构。 中断向量表的每个条目（称为中断向量）都是中断处理程序的地址。

    ![image-20200512230146275](C:\Users\apple\AppData\Roaming\Typora\typora-user-images\image-20200512230146275.png)

51. `DMA (Direct Memory Access)`：直接内存访问，直接内存访问是计算机科学中的一种内存访问技术。它允许某些电脑内部的硬件子系统（电脑外设），可以独立地直接读写系统内存，而不需中央处理器（CPU）介入处理 。

52. `总线(Bus)`：总线（Bus）是指计算机组件间规范化的交换数据的方式，即以一种通用的方式为各组件提供数据传送和控制逻辑。

53. `PCIe (Peripheral Component Interconnect Express)`：官方简称PCIe，是计算机总线的一个重要分支，它沿用现有的PCI编程概念及信号标准，并且构建了更加高速的串行通信系统标准。

54. `DMI (Direct Media Interface)`：直接媒体接口，是英特尔专用的总线，用于电脑主板上南桥芯片和北桥芯片之间的连接。

55. `USB(Universal Serial Bus)`：是连接计算机系统与外部设备的一种`串口总线`标准，也是一种输入输出接口的技术规范，被广泛地应用于个人电脑和移动设备等信息通讯产品，并扩展至摄影器材、数字电视（机顶盒）、游戏机等其它相关领域。

56. `BIOS(Basic Input Output System)`：是在通电引导阶段运行硬件初始化，以及为操作系统提供运行时服务的固件。它是开机时运行的第一个软件。

57. `硬实时系统(hard real-time system)`：硬实时性意味着你必须绝对在每个截止日期前完成任务。 很少有系统有此要求。 例如核系统，一些医疗应用（例如起搏器），大量国防应用，航空电子设备等。

58. `软实时系统(soft real-time system)`：软实时系统可能会错过某些截止日期，但是如果错过太多，最终性能将下降。 一个很好的例子是计算机中的声音系统。

59. `进程(Process)`：程序本身只是指令、数据及其组织形式的描述，进程才是程序（那些指令和数据）的真正运行实例。若进程有可能与同一个程序相关系，且每个进程皆可以同步（循序）或异步的方式独立运行。

60. `地址空间(address space)`：地址空间是内存中可供程序或进程使用的有效地址范围。 也就是说，它是程序或进程可以访问的内存。 存储器可以是物理的也可以是虚拟的，用于执行指令和存储数据。

61. `进程表(process table)`：进程表是操作系统维护的`数据结构`，该表中的每个条目（通常称为上下文块）均包含有关`进程`的信息，例如进程名称和状态，优先级，寄存器以及它可能正在等待的信号灯。

62. `命令行界面(command-line interpreter)`：是在图形用户界面得到普及之前使用最为广泛的用户界面，它通常不支持鼠标，用户通过键盘输入指令，计算机接收到指令后，予以执行。

63. `进程间通信(interprocess communication)`： 指至少两个进程或线程间传送数据或信号的一些技术或方法。

64. `超级用户(superuser)`： 也被称为管理员帐户，在计算机操作系统领域中指一种用于进行系统管理的特殊用户，其在系统中的实际名称也因系统而异，如 root、administrator 与supervisor。

65. `目录(directory)`: 在计算机或相关设备中，一个目录或文件夹就是一个装有数字文件系统的虚拟`容器`。在它里面保存着一组文件和其它一些目录。

66. `路径(path name)`： 路径是一种电脑文件或目录的名称的通用表现形式，它指向文件系统上的一个唯一位置。

67. `根目录(root directory)`：根目录指的就是计算机系统中的顶层目录，比如 Windows 中的 C 盘和 D 盘，Linux 中的 `/`。

68. `工作目录(Working directory)`：它是一个计算机用语。用户在操作系统内所在的目录，用户可在此目录之下，用相对文件名访问文件。

69. `文件描述符(file descriptor)`： 文件描述符是计算机科学中的一个术语，是一个用于表述指向文件的引用的抽象化概念。

70. `inode`：索引节点的缩写，索引节点是 UNIX 系统中包含的信息，其中包含有关每个文件的详细信息，例如节点，所有者，文件，文件位置等。

71. `共享库(shared library)`：共享库是一个包含目标代码的文件，执行过程中多个 a.out 文件可能会同时使用该目标代码。

72. `DLLs (Dynamic-Link Libraries)`：动态链接库，它是微软公司在操作系统中实现`共享函数库`概念的一种实现方式。这些库函数的扩展名是 .DLL、.OCX（包含ActiveX控制的库）或者.DRV（旧式的系统驱动程序）。

73. `客户端(clients)`：客户端是访问服务器提供的服务的计算机硬件或软件。

74. `服务端(servers)`： 在计算中，服务器是为其他程序或设备提供功能的计算机程序或设备，称为`服务端`

## 进程和线程

#### 1.1 什么是进程？什么是线程？

![image-20200512231904027](C:\Users\apple\AppData\Roaming\Typora\typora-user-images\image-20200512231904027.png)

注：资源是指处理器CPU时间、存储器、文件、IO设备这四个

#### 1.2 进程和线程的区别？相比进程，线程有哪些好处？

1. 一个进程可以有多个线程，多个线程可以并发，可以共享进程数据，拥有自己独立的栈空间和执行序列。
2. 进程与线程是不同的系统资源管理方式。进程拥有独立的地址空间，而线程没有。一个进程崩溃后，在保护模式下，不会对其他进程造成影响；而线程只是进程的一个执行路径，没有自己独立的地址空间，一旦一个线程崩溃，整个进程就会崩溃。所以，多进程的程序比多线程程序更加健壮。
3. 线程不占用系统资源，调度线程比调度进程开销更小，在线程间切换比在进程间切换效率高。
4. 对于一些要求同时进行而又共享某些变量的并发操作来说，只能用多线程，不能用多进程。

**使用线程有哪些好处？**

1. 创建线程比创建进程需要的时间更少
2. 终止线程比终止进程时间更少
3. 切换线程比切换进程更快
4. 线程间通信无需调用内核即可实现。同一进程的线程共享进程的数据。

#### 1.3 进程间通信的方式有哪些？

Windows 和 Linux操作系统有不同的进程间通信方式

![image-20200512232208650](C:\Users\apple\AppData\Roaming\Typora\typora-user-images\image-20200512232208650.png)

windows和linux共有的进程间通信方式：

1. 消息（linux中叫做信号）
2. 共享内存
3. 邮槽
4. 管道
5. socket

#### 1.4 线程同步方式有哪些？进程同步的方式有哪些？

**什么是线程同步？**

答：线程同步是指多线程通过特定的方式（如互斥量）来控制线程之间的执行顺序(同步），也可以说是在线程之间通过同步建立起执行顺序的关系，如果没有同步那线程之间是各自运行各自的。

**线程同步方式有哪些？**
答：

1. 互斥(信号)量，每个时刻只有一个线程可以访问公共资源。只有拥有互斥对象的线程才能访问公共资源，互斥对象只有一个，一个时刻只能有一个线程持有，所以保证了公共资源不会被多个线程同时访问。
2. 信号量，允许多个线程同时访问公共资源。当时控制了访问资源的线程的最大个数。
   事件 in windows（条件变量 in linux）。通过通知的方式保持多线程的同步，还可以方便的实现多线程优先级的比较
3. 临界区。任意时刻只能有一个线程进入临界区，访问临界资源。

**进程同步的方式有哪些？**

答：

1. 原子操作
2. 信号量
3. 管程
4. 会合
5. 分布式系统

#### 1.5 临界区

**什么是临界区？**

答：每个进程（线程）中，访问临界资源（不可共享的资源）的那段代码称为临界区。每次只允许一个进程（线程）进入临界区，进入后不允许其他进程（线程）进入

**如何解决临界区冲突？**

答：

1. 一次只允许一个进程（线程）进入临界区，如果有一个进程（线程）已经进入了自己的临界区，其他试图进入临界区的进程（线程）必须等待
2. 进入临界区的进程（线程）要在有限的时间内退出临界区，以便于其他进程（线程）进入自己的临界区
3. 如果进程（线程）无法进入自己的临界区，则应该让出CPU等资源，避免进程（线程）出现“忙等”现象。

**实现临界区的方法有哪些？**

答：

1. 软件实现
2. 中断屏蔽（关中断，开中断）
3. 硬件指令方法

#### 1.6 进程有几种状态？状态之间的转换是怎么样的？

- 就绪。进程已经获得了除CPU以外的所有所需资源，等待分配CPU资源

- 运行。已获得了CPU资源，进行运行。处于运行态的进程数<=CPU核心数

- 阻塞。进程等待某些条件，在条件满足前无法执行

  ![image-20200513100930644](C:\Users\apple\AppData\Roaming\Typora\typora-user-images\image-20200513100930644.png)

#### 1.7 进程创建的过程

1. 给新进程分配一个唯一的标识符
2. 给进程分配内存空间
3. 初始化进程控制块PCB
4. 将PCB放入就绪队列中，等待分配CPU资源

#### 1.8 什么是进程控制块PCB？PCB保存了哪些信息？

1. 是进程存在的唯一标识
2. 创建一个进程就会创建一个PCB，当进程撤销时，系统回收它的PCB
3. 系统对进程的控制根据PCB进行，对进程的管理通过管理PCB实现
4. 能实现间断性的运行方式
5. 提供进程间通信管理所需的资源
6. 提供进程调度所需的信息

**PCB中保存了：**

1. 进程的标识信息
2. 进程的状态信息（就绪、运行、阻塞）
3. 进程的控制信息

#### 1.9 进程和程序的区别？

1. 程序是计算机指令的集合，以文件的形式存放在磁盘上，是静态的文本。不使用系统资源，不能申请资源，不能被调度，不能作为运行的单位。
2. 进程是程序的运行实体，包含了程序段、数据段、PCB，是程序在其地址空间中的执行活动，是系统分配资源的基本单位。使用系统资源，可以运行

#### 1.10 进程（线程）调度的几种算法？

1. **时间片轮转调度算法（RR）**：给每个进程固定的执行时间，根据进程到达的先后顺序让进程在单位时间片内执行，执行完成后便调度下一个进程执行，时间片轮转调度不考虑进程等待时间和执行时间，属于抢占式调度。优点是兼顾长短作业；缺点是平均等待时间较长，上下文切换较费时。适用于分时系统。
2. **先来先服务调度算法（FCFS**）：根据进程到达的先后顺序执行进程，不考虑等待时间和执行时间，会产生**饥饿**现象。属于非抢占式调度，优点是公平，实现简单；缺点是不利于短作业。
3. **优先级调度算法（HPF**）：在进程等待队列中选择优先级最高的来执行。
4. **多级反馈队列调度算法**：将**时间片轮转与优先级调度**相结合，把进程按优先级分成不同的队列，先按优先级调度，优先级相同的，按时间片轮转。优点是兼顾长短作业，有较好的响应时间，可行性强，适用于各种作业环境。
5. **高响应比优先调度算法**：根据“响应比=（进程执行时间+进程等待时间）/ 进程执行时间”这个公式得到的响应比来进行调度。高响应比优先算法在等待时间相同的情况下，作业执行的时间越短，响应比越高，满足段任务优先，同时响应比会随着等待时间增加而变大，优先级会提高，能够避免饥饿现象。优点是兼顾长短作业，缺点是计算响应比开销大，适用于批处理系统。

#### 1.11 缓冲区溢出？

**什么是缓冲区溢出？**

答：当前计算机向缓冲区填充数据时，超出了缓冲区自身的容量，溢出的数据覆盖在合法的数据上。

**缓冲区溢出的危害？**

答：

1. 程序崩溃，导致拒绝服务
2. 跳转并执行一段恶意代码

**缓冲区溢出的原因是什么？**

答：程序没有在填充前检查用户的输入长度。

#### 1.12 进程调度和线程调度的关系？

1. 进程和线程都有三种状态（就绪、运行、阻塞）
2. 如果一个线程进行了系统调用，则整个进程阻塞（系统调用会使进程阻塞，而线程还是处于运行态，不会阻塞），控制权从程序转移走，但在线程角度看，此线程还在运行态。而进程已经到了阻塞态。
3. 当线程A等待线程B的某些事件时，A被阻塞，控制权从A移到B。

#### 1.13 线程实现的两种方式？各有什么优缺点？

1. 用户级线程（Linux）
2. 内核级线程（Windows）

![image-20200513102002391](C:\Users\apple\AppData\Roaming\Typora\typora-user-images\image-20200513102002391.png)

#### 1.14 死锁

**什么是死锁？**

答：在两个以上的并发进程中，如果每个进程都持有某种资源而又等待其他进程释放他们持有的资源，在未改变这种状态前，谁都无法推进，则发生了死锁。所有进程无限期等待，且循环等待，都处于阻塞态。

**死锁产生的四个必要条件？**

1. 互斥。一个资源一次只能被一个进程占有
2. 请求与保持。一个进程因为请求资源而阻塞时，不释放自己持有的资源
3. 非剥夺。无法在进程结束前剥夺它对资源的所有权
4. 循环等待。若干进程收尾相接形成环形等待关系

**死锁处理的策略？**
答：

1. 预防死锁。破坏后三个条件中的一个即可（互斥是非共享设备的特性，无法更改）：
   1. 破坏请求与保持条件。规定一个进程开始前，必须申请所有需要的资源。
      破坏非剥夺条件。当无法得到需要的资源时，释放自己持有的资源，等需要时再重新申请。
      破坏循环等待条件。将所有资源按类型线性排队，并赋予不同的编号，所有进程请求资源时，必须按照资源递增顺序，以防出现环路。如果一个进程已经分配到了R资源，那么它再申请时，只能申请排在R后面的资源，而不能申请前面的资源。
2. 死锁避免。避免死锁并不是事先采取某种限制措施破坏死锁的必要条件，而是再资源动态分配过程中，防止系统进入不安全状态，以避免发生死锁：
   1. 银行家算法
   2. 系统安全状态
   3. 安全性算法
3. 死锁的检测与解除
   1. 资源分配图
   2. 死锁定理
   3. 死锁解除

#### 1.15 互斥量、信号量
* 互斥量是一种特殊的信号量，对一个互斥量的PV操作都在一个线程中，是一种对临界区的封锁方法。互斥量总是初始化为1。
* 信号量是线程间通信的一种方法，PV操作在两个线程中，通常由一个线程释放信号量，另一个线程在信号量上排队。初始化值为非负数（0~n）。
* 互斥量和信号量的原语是一样的。

#### 1.16 互斥锁

互斥锁就是用互斥量（被初始化为1的信号量）来封锁，PV操作在一个线程内成对出现。互斥是为了让一次只有一个线程可以访问公共资源。互斥锁是一种很简单的线程同步方法。

#### 1.17 同步信号量和互斥信号量

1. 同步信号量和互斥信号量都是信号量，操作都是PV操作。
2. 同步信号量初始化为非负数，而互斥信号量总是初始化为1.
3. 同步信号量实现了线程间的同步，互斥信号量实现了对公共资源的互斥访问

#### 1.18 互斥量和临界区的区别
1. 两者都可以实现对互斥资源的互斥访问
2. 临界区只能用于对象在同一进程里线程间的互斥访问；互斥体可以用于对象进程间或线程间的互斥访问。
3. 临界区是非内核对象，只在用户态进行锁操作，速度快；互斥体是内核对象，在核心态进行锁操作，速度慢。
4. 临界区和互斥体在Windows平台都下可用；Linux下只有互斥体可用。

## 内存管理



文章参考：

https://blog.csdn.net/csdn_chai/article/details/78002202

https://blog.csdn.net/weixin_43336281/article/details/105906368